<div id="certificate-samplelab" class="page-layout simple"  style="overflow: auto; height: 100%; background-color: #f7f7f7;" >
    <div class="content" style="overflow: auto;" *ngIf="this.dataContract.length > 0">
        <mat-card class="mat-elevation-z0"  style="width: 98%; margin: 20px auto 10px auto;"  >
            <h2 style="font-weight:bolder; margin-bottom:30px;">Sample From Lab</h2>
            <h3 style="font-weight:bold ;">Contract Identity</h3>
            
            <div fxLayout="row" fxLayoutAlign="start center" style="margin-top: 20px;">
                <div  fxFlex="30">                    
                    <span style="font-weight: 700;">Contract Number</span>
                    <p style="font-size:11px;">{{ this.dataContract[0].contract_no }}</p>
                </div>
                <div  fxFlex="30">                    
                    <span style="font-weight: 700;">Category</span>
                    <p style="font-size:11px;">{{ dataContract[0].contract_category.title }}</p>
                </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="start center" style="margin-top: 20px;">
                <div  fxFlex="30">                    
                    <span style="font-weight: 700;">Customer</span>
                    <p style="font-size:11px;">{{ dataContract[0].customers_handle.customers.customer_name }}</p>
                </div>
                <div  fxFlex="30">                    
                    <span style="font-weight: 700;">Contact Person</span>
                    <p style="font-size:11px;">{{ this.dataContract[0].customers_handle.contact_person.name }}</p>
                </div>
                <div  fxFlex="30">                    
                    <span style="font-weight: 700;">Phone/Mobile</span>
                    <p style="font-size:11px;">{{  this.dataContract[0].customers_handle.telp == '-' ? '-' : '+62' + this.dataContract[0].customers_handle.telp }} / {{ this.dataContract[0].customers_handle.phone == '-' ? '-' : '+62' + this.dataContract[0].customers_handle.phone }}</p>
                </div>
            </div>

            <div fxLayout="row" fxLayoutAlign="start center" style="margin-top: 20px;">
                <div  fxFlex="30">                    
                    <span style="font-weight: 700;">Others</span>
                    <div>                    
                        <button mat-icon-button color="white"
                            class="contract-certficate"
                            matTooltip="Contract"
                            aria-label="Example icon button with a filter list icon"
                            (click)="openPdf(this.dataContract[0].id_kontrakuji,'preview')"
                            [@animate]="{value:'*',params:{delay:'150ms',scale:'0.2'}}">
                            <mat-icon>description</mat-icon>
                        </button>
            
                        <button mat-icon-button color="white"
                            class="contract-certficate"
                            matTooltip="Sample Lab"
                            aria-label="Example icon button with a filter list icon"
                            (click)="goSample(dataContract[0].id_kontrakuji)"
                            [@animate]="{value:'*',params:{delay:'150ms',scale:'0.2'}}">
                            <mat-icon>folder_open</mat-icon>
                        </button>
                   </div>
                </div>
            </div>
        </mat-card>
        <mat-card class="mat-elevation-z0"  style="width: 98%; margin: 20px auto 10px auto;">
            <div fxLayout="row" fxLayoutAlign="space-between center" >
                <div style="margin-bottom:40px;">
                    <span style="font-size: 18px; font-weight: bolder; color: #303030; margin-right: 25px;" fxHide fxShow.gt-md>List Sample</span>
                </div>
                <div style="margin-bottom:40px;" fxLayout="row" fxLayoutAlign="space-evenly center" >
                    <button mat-icon-button color="white"
                    class="contract-certficate"
                    matTooltip="Create Result of Analisys"
                    aria-label="Example icon button with a filter list icon"
                    (click)="makeLHU()"
                    [@animate]="{value:'*',params:{delay:'150ms',scale:'0.2'}}"
                    *ngIf="this.checkList.length > 0">
                        <mat-icon>check_circle</mat-icon>
                    </button>

                    <button mat-icon-button color="white"
                    class="contract-certficate"
                    matTooltip="Cancel"
                    aria-label="Example icon button with a filter list icon"
                    (click)="cancelAction()"
                    [@animate]="{value:'*',params:{delay:'150ms',scale:'0.2'}}"
                    *ngIf="this.checkList.length > 0">
                        <mat-icon>cancel</mat-icon>
                    </button>
                </div>
            </div> 

            <mat-table class="sample-cert-table" #table [dataSource]="dataSampleLab" matSort (matSortChange)="sortData($event)"
            [@animate]="{value:'*',params:{delay:'120ms',y:'-25px'}}" fusePerfectScrollbar *ngIf="this.dataSampleLab.length > 0" >

                 <!-- Column -->
                <ng-container matColumnDef="checkbox">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="checkbox"><mat-checkbox class="example-margin" 
                        (change)="setAll($event.checked)"
                        (change)="someComplete()"
                        ></mat-checkbox>
                    </mat-header-cell>
                    <mat-cell *matCellDef="let dataSampleLab">
                        <mat-checkbox class="example-margin"
                        [(ngModel)]="dataSampleLab.completed"
                        (ngModelChange)="updateAllComplete()"
                        (change)="checkBox($event.checked, dataSampleLab.id)"
                        ></mat-checkbox>
                    </mat-cell>
                </ng-container>

                <!-- Column -->
                <ng-container matColumnDef="no_sample">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="no_sample">Sample Number</mat-header-cell>
                    <mat-cell *matCellDef="let dataSampleLab">
                        <p class="text-truncate" matTooltip="{{ dataSampleLab.no_sample }}">{{ dataSampleLab.no_sample }}</p>
                    </mat-cell>
                </ng-container>

                <!-- Column -->
                <ng-container matColumnDef="sample_name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="sample_name">Sample Name</mat-header-cell>
                    <mat-cell *matCellDef="let dataSampleLab">
                        <p class="text-truncate" matTooltip="{{ dataSampleLab.sample_name }}">{{ dataSampleLab.sample_name }}</p>
                    </mat-cell>
                </ng-container>

                 <!-- Column -->
                 <ng-container matColumnDef="status">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="status">Status</mat-header-cell>
                    <mat-cell *matCellDef="let dataSampleLab">
                        <div *ngIf="dataSampleLab.id_statuspengujian == 1" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                                width: 15px;
                                background-color: #2ecc71;
                                border-radius: 50%;
                                display: inline-block;
                                margin-right:5px;"></span>
                            <p class="text-truncate" matTooltip="Normal">                                
                                Normal</p>
                        </div>
    
                        <div *ngIf="dataSampleLab.id_statuspengujian == 2" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                            width: 15px;
                            background-color: #f7dc6f;
                            border-radius: 50%;
                            display: inline-block;
                            margin-right:5px;"></span>
                        <p class="text-truncate" matTooltip="Urgent">                            
                            Urgent</p>
                        </div>
    
                        <div *ngIf="dataSampleLab.id_statuspengujian == 3" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                            width: 15px;
                            background-color: #e74c3c;
                            border-radius: 50%;
                            display: inline-block;
                            margin-right:5px;"></span>
                        <p class="text-truncate" matTooltip="Very Urgent">                            
                            Very Urgent</p>
                        </div>

                        <div *ngIf="dataSampleLab.id_statuspengujian == 4" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                                width: 15px;
                                background-color: #2e95cc;
                                border-radius: 50%;
                                display: inline-block;
                                margin-right:5px;"></span>
                            <p class="text-truncate" matTooltip="Custom 2 Day">                                
                                Custom 2 Day</p>
                        </div>

                        <div *ngIf="dataSampleLab.id_statuspengujian == 5" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                                width: 15px;
                                background-color: #2e95cc;
                                border-radius: 50%;
                                display: inline-block;
                                margin-right:5px;"></span>
                            <p class="text-truncate" matTooltip="Custom 1 Day">                                
                                Custom 1 Day</p>
                        </div>
                    </mat-cell>
                </ng-container>

                <!-- Column -->
                <ng-container matColumnDef="tgl_estimasi_lab">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="tanggal_terima">Lab Approve</mat-header-cell>
                        <mat-cell *matCellDef="let dataSampleLab">
                            <p class="text-truncate" matTooltip="{{ dataSampleLab.sample_condition_cert.inserted_at | date }}">{{dataSampleLab.sample_condition_cert.inserted_at | date}}</p>
                        </mat-cell>
                </ng-container>

                <!-- Column -->
                <ng-container matColumnDef="cert_status">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="cert_status">Cert Status</mat-header-cell>
                    <mat-cell *matCellDef="let dataSampleLab">
                        <div *ngIf="dataSampleLab.ecertlhu !== null" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                                width: 15px;
                                background-color: #2ecc71;
                                border-radius: 50%;
                                display: inline-block;
                                margin-right:5px;"></span>
                            <p class="text-truncate" matTooltip="Created">                                
                                Created</p>
                        </div>
                        <div *ngIf="dataSampleLab.ecertlhu == null" fxLayout="row" fxLayoutAlign="space-evenly center">
                            <span style="height: 15px;
                            width: 15px;
                            background-color: #e74c3c;
                            border-radius: 50%;
                            display: inline-block;
                            margin-right:5px;"></span>
                        <p class="text-truncate" matTooltip="Not Yet">                            
                            Not Yet</p>
                        </div>
                    </mat-cell>
                </ng-container>

                 <!-- Column -->
                 <ng-container matColumnDef="tgl_selesai">
                    <mat-header-cell *matHeaderCellDef mat-sort-header="tgl_selesai">Date of Completion</mat-header-cell>
                        <mat-cell *matCellDef="let dataSampleLab">
                            <p class="text-truncate" matTooltip="{{dataSampleLab.tgl_selesai | date}}">{{dataSampleLab.tgl_selesai | date}}</p>
                        </mat-cell>
                </ng-container>

                <!-- Column -->
                <ng-container matColumnDef="action" >
                    <mat-header-cell *matHeaderCellDef mat-sort-header="tgl_selesai">Action</mat-header-cell>
                    <mat-cell *matCellDef="let dataSampleLab; let indexOfelement=index;">
                        <button mat-icon-button (click)="resultModals(dataSampleLab.id)">
                            <mat-icon>launch</mat-icon>
                        </button>
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></mat-header-row>
                <mat-row *matRowDef="let dataSampleLab; columns: displayedColumns;"
                class="standart"
                matRipple>

                </mat-row>
            </mat-table>

            <div [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                <mat-paginator #paginator
                [length]="total"
                [pageIndex]="from"
                [pageSize]="to"
                [hidePageSize]="true"
                [showFirstLastButtons]="true"
                (page) = "paginated($event)"
                style="font-size: 10px;"
                *ngIf="this.total > 0">
    
                </mat-paginator>
            </div>
            <div *ngIf="loadingfirst && this.dataSampleLab.length === 0" style="width: 20%; margin-left: auto; margin-right: auto; margin-top: auto; margin-bottom: auto; display: block; text-align: center;">
                <img  src="assets/images/gif/loading.gif" />
                <small>Please Wait ...</small>
            </div>
    
            <div *ngIf="!loadingfirst && this.dataSampleLab.length === 0" style="width: 20%; margin-left: auto; margin-right: auto; margin-top: auto; margin-bottom: auto; display: block; text-align: center;">
                <img  src="assets/images/gif/selectfile.gif" />
                <small>No Data</small>
            </div>
        </mat-card>
    </div>
</div>