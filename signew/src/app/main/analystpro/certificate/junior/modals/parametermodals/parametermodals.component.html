<div class="dialog-content-wrapper mat-primary m-0" style="overflow: hidden; height: 100%;">
    <mat-toolbar matDialogTitle class="mat-primary m-0">
        <mat-toolbar-row>
            <div id="leftContainer" fxFlex="90%">
              <span class="title dialog-title" style="font-size: 14px;">
            [ {{ this.datas.lhu }} ] Parameters {{ this.dataParameter.length }}
              </span>
            </div>
            
            <div id="rightContainer" fxFlex="10%">
                
              <button mat-flat-button aria-label="Parameter" matTooltip="Listing" color="primary" *ngIf="this.dragDrop == false" (click)="choiceSample(true)">
                <mat-icon>list icon</mat-icon>
              </button>
              <button mat-flat-button aria-label="Parameter" matTooltip="Form" color="primary" *ngIf="this.dragDrop == true" (click)="choiceSample(false)">
                <mat-icon>receipt icon</mat-icon> 
              </button>
              <button mat-flat-button aria-label="Parameter" matTooltip="Parameter" color="primary" (click)="certModals(this.id_transaction)" style="margin-left: -20px;">
                <mat-icon>folder icon</mat-icon>
              </button>
            </div>
        </mat-toolbar-row>
    </mat-toolbar>

    <div mat-dialog-content class="p-25 m-0 " style="overflow: unset !important; height: 100%;" *ngIf="this.dragDrop == false" >  
       <form [formGroup]="this.parameterForm" >
        <div class="content inner-scroll" style="
        max-height: 72vh;
        overflow: auto;
        scrollbar-width: thin;
        width: auto;
        margin-left: -35px; ">
                <mat-table class="sample-cert-table" #table  formArrayName="parameters" [dataSource]="this.parameterForm.controls.parameters['controls']"  *ngIf="this.dataParameter.length > 0"
                    (scroll)="onTableScroll($event)"
                    infiniteScroll
                    [infiniteScrollDistance]="2" 
                    [infiniteScrollUpDistance]="1.5"
                    [infiniteScrollThrottle]="5"
                    (scrolled)="onScroll($event)"
                    [scrollWindow]="false"
                    style=" overflow: auto; width: 3000px; "
                    [@animateStagger]="{value:'50'}">

                    <ng-container matColumnDef="action" sticky>
                        <mat-header-cell *matHeaderCellDef >
                            <mat-checkbox class="example-margin" 
                            (change)="setAll($event.checked)"
                            (change)="someComplete()"
                            ></mat-checkbox>

                        </mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <!-- <mat-checkbox class="example-margin"
                            [(ngModel)]="element.completed"
                            (ngModelChange)="updateAllComplete()"
                            (change)="checkBox($event.checked, element.id)"
                            ></mat-checkbox> -->

                            <button mat-icon-button color="warn" (click)="deleteParameter(i, element)" style="margin-left:20px;">
                                <mat-icon>cancel</mat-icon>
                            </button>   
                            
                            <button mat-icon-button color="primary" [matMenuTriggerFor]="moreMenu" aria-label="More"                                   
                            cdkDrag #elem="cdkDrag" (mouseenter)="enter(i)">
                            <mat-icon>more_vert</mat-icon>
                            </button>

                            <mat-menu #moreMenu="matMenu" >
                                <div  *ngIf="this.copydata.length < 1">
                                    <mat-grid-list cols="1" rowHeight="2:1" style="width: 200px;">
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="CopyDataParameters(element.value)">
                                                <mat-icon>library_add</mat-icon>
                                                <span  style="margin-left: -15px; font-size: 10px;">Copy Parameter</span>
                                            </button> 
                                        </mat-grid-tile>
                                    </mat-grid-list>
                                    <mat-grid-list cols="2" rowHeight="2:1" style="width: 200px;">
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.parameteruji_id,copyid)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span  style="margin-left: -15px; font-size: 10px;">ID</span>
                                            </button> 
                                        </mat-grid-tile>
                                        <mat-grid-tile> 
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.parameteruji_en,copyen)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span  style="margin-left: -15px; font-size: 10px;">EN</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.hasiluji ,copyresult)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">Result</span>
                                            </button> 
                                        </mat-grid-tile>
                                        <mat-grid-tile> 
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.unit,copyunit)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span  style="margin-left: -15px; font-size: 10px;">Unit</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.simplo,copysimplo)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">Simplo</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.duplo,copyduplo)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">Duplo</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.triplo,copytriplo)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">Triplo</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.metode,copymetode)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">Metode</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.lod,copylod)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">LOD</span>
                                            </button>
                                        </mat-grid-tile>
                                        <mat-grid-tile>
                                            <button mat-menu-item aria-label="remove" (click)="copyParameter(element.value.standart,copystandart)">
                                                <mat-icon>file_copy</mat-icon>
                                                <span style="margin-left: -15px; font-size: 10px;">Standart</span>
                                            </button>
                                        </mat-grid-tile>
                                    </mat-grid-list>
                                </div>
                                <div *ngIf="this.copydata.length > 0">
                                <button mat-menu-item aria-label="remove" (click)="cancelCopyParameter()">
                                    <mat-icon>cancel</mat-icon>
                                    <span>Cancel</span>
                                </button>
                                <button mat-menu-item aria-label="remove" (click)="pasteParameter(i)">
                                    <mat-icon>insert_drive_file</mat-icon>
                                    <span>Paste</span>
                                </button>
                                </div>
                            </mat-menu>  
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="parameteruji_id">
                        <mat-header-cell *matHeaderCellDef>ID</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10" >
                                <mat-label>parameter id</mat-label>
                                <input matInput formControlName="parameter" formControlName="parameteruji_id">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="parameteruji_en">
                        <mat-header-cell *matHeaderCellDef >EN</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>parameter en</mat-label>
                                <input matInput placeholder="parameter en" formControlName="parameteruji_en">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="hasiluji">
                        <mat-header-cell *matHeaderCellDef >Result</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>result</mat-label>
                                <input matInput placeholder="result" formControlName="hasiluji">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="unit">
                        <mat-header-cell *matHeaderCellDef >Unit</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>unit</mat-label>
                                <input matInput placeholder="unit" formControlName="unit">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="simplo">
                        <mat-header-cell *matHeaderCellDef >Simplo</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>simplo</mat-label>
                                <input matInput placeholder="simplo" formControlName="simplo">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="duplo">
                        <mat-header-cell *matHeaderCellDef >Duplo</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>duplo</mat-label>
                                <input matInput placeholder="duplo" formControlName="duplo">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="triplo">
                        <mat-header-cell *matHeaderCellDef >Triplo</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>triplo</mat-label>
                                <input matInput placeholder="triplo" formControlName="triplo">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="metode">
                        <mat-header-cell *matHeaderCellDef >Metode</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>metode</mat-label>
                                <input matInput placeholder="metode" formControlName="metode">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="lod">
                        <mat-header-cell *matHeaderCellDef >LOD</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>lod</mat-label>
                                <input matInput placeholder="lod" formControlName="lod">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="standart">
                        <mat-header-cell *matHeaderCellDef >Standart</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>standart</mat-label>
                                <input matInput placeholder="standart" formControlName="standart">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="n">
                        <mat-header-cell *matHeaderCellDef >n</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>n</mat-label>
                                <input matInput placeholder="n" formControlName="n">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="c">
                        <mat-header-cell *matHeaderCellDef >c</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>c</mat-label>
                                <input matInput placeholder="c" formControlName="c">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="m">
                        <mat-header-cell *matHeaderCellDef >m</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>m</mat-label>
                                <input matInput placeholder="m" formControlName="m">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="mm">
                        <mat-header-cell *matHeaderCellDef >M</mat-header-cell>
                        <mat-cell *matCellDef="let element; let i=index; " [formGroupName]="i">
                            
                            <mat-form-field appearance="outline" fxFlex="90" class="p-10 mt-10">
                                <mat-label>M</mat-label>
                                <input matInput placeholder="M" formControlName="mm">
                            </mat-form-field>
                        </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row> 
                    <mat-row *matRowDef="let element; columns: displayedColumns;  let i = index; " [formGroupName]="i" 
                    class="standart"
                    matRipple
                    ></mat-row>

                </mat-table>

            </div>
        </form>
                
    </div>


    <!-- TRUE -->
    <div mat-dialog-content class="p-25 m-0 " style="overflow: auto !important; height: 100%; padding-left: 0px;" *ngIf="this.dragDrop == true" >   
        <!-- <div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)" style="overflow-y: scroll;">      -->
        <mat-table class="sampledata-cert-table exxo" #table [dataSource]="this.listDataParameter"  style=" overflow: auto;" cdkDropList  (cdkDropListDropped)="drop($event)">

            <ng-container matColumnDef="action" sticky>
                <mat-header-cell *matHeaderCellDef >#</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <div class="example-handle" cdkDragHandle>
                        <mat-icon>drag_handle</mat-icon>
                    </div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="parameteruji_id" sticky>
                <mat-header-cell *matHeaderCellDef>ID</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                   <p class="text-truncate">{{ element.parameteruji_id }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="parameteruji_en" sticky>
                <mat-header-cell *matHeaderCellDef >EN</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <p class="text-truncate">{{ element.parameteruji_en }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="hasiluji">
                <mat-header-cell *matHeaderCellDef >Result</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <p class="text-truncate">{{ element.hasiluji}}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="unit">
                <mat-header-cell *matHeaderCellDef >Unit</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <p class="text-truncate">{{ element.duplo}}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="simplo">
                <mat-header-cell *matHeaderCellDef >Simplo</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; " >
                    <p class="text-truncate">{{ element.simplo }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="duplo">
                <mat-header-cell *matHeaderCellDef >Duplo</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <p class="text-truncate">{{ element.duplo }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="triplo">
                <mat-header-cell *matHeaderCellDef >Triplo</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; " >
                    <p class="text-truncate">{{ element.triplo }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="metode">
                <mat-header-cell *matHeaderCellDef >Metode</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <p class="text-truncate">{{ element.metode }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="lod">
                <mat-header-cell *matHeaderCellDef >LOD</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; " >
                    <p class="text-truncate">{{ element.lod }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="standart">
                <mat-header-cell *matHeaderCellDef >Standart</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; " >
                    <p class="text-truncate">{{ element.standart }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="n">
                <mat-header-cell *matHeaderCellDef >n</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; " >
                    <p class="text-truncate">{{ element.n }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="c">
                <mat-header-cell *matHeaderCellDef >c</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                  
                    <p class="text-truncate">{{ element.c }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="m">
                <mat-header-cell *matHeaderCellDef >m</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; " >
                    <p class="text-truncate">{{ element.m }}</p>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="mm">
                <mat-header-cell *matHeaderCellDef >M</mat-header-cell>
                <mat-cell *matCellDef="let element; let i=index; ">
                    <p class="text-truncate">{{ element.mm }}</p>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns;"></mat-header-row> 
            <mat-row *matRowDef="let element; columns: displayedColumns;  let i = index; " 
            class="standart" cdkDrag (cdkDragStarted)="dragStarted($event)" [cdkDragData]="element"
            matRipple
            ></mat-row>

        </mat-table>
        <!-- </div> -->
    </div>

    <!-- Kaki kaki -->
    <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center" style="margin-bottom: 30px;" *ngIf="this.dataParameter.length > 0">
      
        <div style="float: left; margin-right: 100px; margin-left: -30px;" >
            <button mat-raised-button color="accent" matTooltip="Paste All" (click)="pasteAllParameter()"  *ngIf="this.copydata.length > 0"><mat-icon>insert_drive_file</mat-icon></button>
            <button mat-raised-button color="warn" matTooltip="Cancel" (click)="cancelCopyParameter()"  *ngIf="this.copydata.length > 0"><mat-icon>cancel</mat-icon></button>
            <ng-select 
            [(ngModel)]="parameterid.id_parameter"
            appendTo="body" 
            [items]="parameters" 
            bindLabel="name_id" 
            bindValue="id"
            (scrollToEnd)="onScrollToEnd('parameters')" 
            (search)="searchParameters($event)"
            placeholder="Select Parameter" 
            dropdownPosition="top" 
            name="id_parameter" 
            style="width: 250px;"
                    *ngIf="this.status_parameter">
            </ng-select>

            <ng-select 
            [(ngModel)]="getIdLhu"
            appendTo="body" 
            [items]="data_lhu" 
            bindLabel="lhu_number" 
            bindValue="id"
            (scrollToEnd)="onScrollToEnd('parameters')" 
            (search)="searchParameters($event)"
            placeholder="Select Lhu" 
            dropdownPosition="top" 
            name="id_lhu" 
            style=" width: 250px;"
            *ngIf="this.status_lhu">
            </ng-select>
        </div>

        <div style="float: left; margin-right: 10px;" *ngIf="this.dragDrop == false">
                

            <button mat-flat-button color="primary" matTooltip=" Add form" (click)="statParam(true)" *ngIf="!(this.status_parameter || this.status_lhu)"><mat-icon>add_circle_outline</mat-icon></button>

            <button mat-mini-fab color="accent" matTooltip="Add Parameter" (click)="addParameters()" *ngIf="this.status_parameter"><mat-icon>add_circle_outline</mat-icon></button>
            <button mat-mini-fab color="warn" matTooltip="Close" (click)="statParam(false)" *ngIf="this.status_parameter"><mat-icon>highlight_off</mat-icon></button>

            <button mat-flat-button color="primary" matTooltip="restore parameter" (click)="getParameterinSample()" *ngIf="!(this.status_parameter || this.status_lhu)" ><mat-icon>restore</mat-icon></button>
            <button mat-flat-button color="primary" matTooltip="get data parameter" (click)="getParameterinLab()" *ngIf="!(this.status_parameter || this.status_lhu)" ><mat-icon>swap_horizontal_circle</mat-icon></button>
        
            <button mat-flat-button color="primary" matTooltip="get parameter in lhu" (click)="statLhu(true)" *ngIf="!(this.status_parameter || this.status_lhu)"><mat-icon>swap_horiz</mat-icon></button>

            <button mat-mini-fab color="accent" matTooltip="Add Parameter" (click)="getParameterinOtherLhu()" *ngIf="this.status_lhu"><mat-icon>add_circle_outline</mat-icon></button>
            <button mat-mini-fab color="warn" matTooltip="Close" (click)="statLhu(false)" *ngIf="this.status_lhu"><mat-icon>highlight_off</mat-icon></button>
        </div>

        <!-- save button -->

        <div style="float: right;">
              <span style="margin-right: 10px; font-weight: 800;"> | </span>
              <button mat-flat-button aria-label="Parameter" matTooltip="Save Form" color="primary" *ngIf="this.dragDrop == false" (click)="saveForm(false)">
                Save
              </button>
              <button mat-flat-button aria-label="Parameter" matTooltip="Update List" color="primary" *ngIf="this.dragDrop == true" (click)="saveForm(true)">
                Update
              </button>
              <button mat-button class="mat-primary" (click)="closeDialog()" aria-label="Close">
                  Close
              </button>
        </div>        
    </div>
    
    <div *ngIf="loadingfirst && this.dataParameter.length === 0" style="width: 20%; margin-left: auto; margin-right: auto; margin-top: auto; margin-bottom: auto; display: block; text-align: center;">
        <img  src="assets/images/gif/loading.gif" />
        <small>Please Wait ...</small>
    </div>

    <div *ngIf="!loadingfirst && this.dataParameter.length === 0" style="width: 20%; margin-left: auto; margin-right: auto; margin-top: auto; margin-bottom: auto; display: block; text-align: center;">
        <img  src="assets/images/gif/selectfile.gif" />
        <small>No Data</small>
    </div>
</div>
