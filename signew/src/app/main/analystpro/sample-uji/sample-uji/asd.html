<div id="sampleuji" class="page-layout carded fullwidth inner-scroll">

    <!-- TOP BACKGROUND -->
    <div class="top-bg primary-700"></div>
    <!-- / TOP BACKGROUND -->
 
   <!-- CENTER -->
   <div class="center">

      <!-- HEADER -->
      <div class="header primary-700"
      fxLayout="column" fxLayoutAlign="center center"
      fxLayout.gt-sm="row" fxLayoutAlign.gt-sm="space-between center">

      <!-- APP TITLE -->
      <div class="logo mb-24 mb-md-0"
            fxLayout="row" fxLayoutAlign="start center">
          <mat-icon class="logo-icon s-32 mr-16" [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">
            compare
          </mat-icon>
          <span class="logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
              Test Sample
          </span>
      </div>
      <!-- / APP TITLE -->

      <!-- SEARCH -->  
      <div class="search-wrapper mx-32 mx-md-0" style="width: 500px;background-color: white;" [@animate]="{value:'*',params:{delay:'150ms',x:'-25px'}}">
        <div style="background-color: white; margin-top: 6px;" class="search" fxFlex fxLayout="row" fxLayoutAlign="start center">
            <mat-icon style="color: #000000">search</mat-icon>
            <input 
            (input)="searchMarketing($event.target.value)"
            #filter 
            placeholder="Search Marketing Number" > 
        </div>
      </div>
      <!-- / SEARCH -->

         <!-- ADD BUTTON -->
      <div style="display: flex; justify-content: center; align-items: center;">
        <button mat-mini-fab color="primary" (click)="clickFilter(true)" *ngIf="this.searchFilter == false">
            <mat-icon>filter_list</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="clickFilter(false)" *ngIf="this.searchFilter == true">
            <mat-icon>filter_list</mat-icon>
        </button>
    </div>
    <!-- / ADD BUTTON --> 

     
      </div>
    <!-- / HEADER -->

      <!-- CONTENT CARD -->
      <div class="content-card" style="height: 70vh; overflow-y: auto;">

        <mat-progress-bar
            color="primary"
            mode="indeterminate"
            value="50" *ngIf="load">
        </mat-progress-bar>
        <div class="search-filter" *ngIf="this.searchFilter == true"  [@animate]="{value:'*',params:{y:'100%'}}">
        <!-- <mat-grid-list cols="3" rowHeight='2:0.5' >

            <mat-grid-tile>
                <mat-form-field appearance="legacy">
                    <mat-label>Sample Name</mat-label>
                    <input matInput 
                        (input)="searchSampleName($event.target.value)">
                    <mat-icon matSuffix>dehaze</mat-icon>
                </mat-form-field>
               
            </mat-grid-tile>

            <mat-grid-tile>
                <mat-form-field appearance="legacy">
                    <mat-label>Category</mat-label>
                      <mat-select placeholder="Category"
                       (change)="searchCategory($event.target.value)" 
                        class="select-me"
                        style="display: flex;
                        justify-content: center;
                        align-items: center; width: 80%;
                        color:white !important;">
                         <mat-option [value]="null">
                           -
                        </mat-option>
                        <mat-option *ngFor="let contractcategory of contractcategory" [value]="contractcategory.id">
                            {{ contractcategory.title }}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix>dehaze</mat-icon>
                  </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile>
                <mat-form-field appearance="legacy">
                    <mat-label>Sample Number</mat-label>
                    <input matInput 
                    (input)="searchSampleNumber($event.target.value)">
                    <mat-icon matSuffix>dehaze</mat-icon>
                  </mat-form-field>
        </mat-grid-tile>    

        </mat-grid-list> -->

        <mat-grid-list cols="3" rowHeight='2:0.5' style="margin-top: 10px; margin-bottom:-20px;">

          <mat-grid-tile>
              <mat-form-field appearance="outline">
                  <mat-label>Company</mat-label>
                  <input matInput 
                      (input)="searchSampleName($event.target.value)" (clear)="reset('sample_name')">
                  <mat-icon matSuffix>dehaze</mat-icon>
              </mat-form-field>
             
          </mat-grid-tile>

          <mat-grid-tile>
              <mat-form-field appearance="outline">
                  <mat-label>Category</mat-label>
                    <mat-select placeholder="Category"
                     (selectionChange)="searchCategory($event)"
                     (clear)="reset('category')"
                      class="select-me"
                      style="display: flex;
                      justify-content: center;
                      align-items: center; width: 100%;
                      color:white !important;">
                      <mat-option *ngFor="let contractcategory of contractcategory" [value]="contractcategory.id">
                          {{ contractcategory.title }}
                      </mat-option>
                  </mat-select>
                  <mat-icon matSuffix>dehaze</mat-icon>
                </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile>
              <mat-form-field appearance="outline">
                  <mat-label>Memo</mat-label>
                  <input matInput 
                      (input)="searchSampleNumber($event.target.value)" (clear)="reset('sample_number')">
                  <mat-icon matSuffix>dehaze</mat-icon>
              </mat-form-field>
             
          </mat-grid-tile>

      </mat-grid-list>
        </div>
        <!-- ACTION BUTTON -->
        <div class="actionbutton" *ngIf="this.checkList.length > 0">

            <!-- BUTTON APPROVE -->
            <div class="approve-bulk" >
                <button mat-mini-fab
                        class="approve-button"
                        matTooltip="Approve"
                        (click)="ApproveSample()"
                        aria-label="Approve Contract"
                        [@animate]="{value:'*', params:{delay:'300ms',scale:'0.2'}}">
                    <mat-icon>check_circle</mat-icon>
                </button>
            </div>
            <!-- / END BUTTON APPROVE-->

            <!-- BUTTON APPROVE -->
            <div class="cancel-bulk">
                <button mat-mini-fab
                        class="cancel-button"
                        matTooltip="Cancel"
                        (click)="cancelApprove()" 
                        aria-label="Cancel"
                        [@animate]="{value:'*', params:{delay:'300ms',scale:'0.2'}}">
                    <mat-icon>cancel</mat-icon>
                </button>
            </div>
            <!-- / END BUTTON APPROVE-->

        </div>
        <!-- END ACTION BUTTON-->
                <mat-table class="sample-uji-table" style="height: 70vh;" #table [dataSource]="sampleujiData" [@animateStagger]="{value:'50'}" 
                    matSort (matSortChange)="sortData($event)" fusePerfectScrollbar  *ngIf="this.sampleujiData.length > 0">
    
                      <!-- Column -->
                      <ng-container matColumnDef="checkbox">
                        <mat-header-cell *matHeaderCellDef mat-sort-header="checkbox"><mat-checkbox class="example-margin" 
                            (change)="setAll($event.checked)"
                            (change)="someComplete()"
                            ></mat-checkbox>
                        </mat-header-cell>
                        <mat-cell *matCellDef="let dataSampleLab">
                            <mat-checkbox class="example-margin"
                            [(ngModel)]="dataSampleLab.completed"
                            (ngModelChange)="updateAllComplete()"
                            (change)="checkBox($event.checked, dataSampleLab.id)"
                            ></mat-checkbox>
                        </mat-cell>
                    </ng-container>

                      <!-- Column -->
                      <ng-container matColumnDef="no_kontrak">
                        <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md mat-sort-header="no_kontrak">Contract Number</mat-header-cell>
                        <mat-cell *matCellDef="let sampleujiData" fxHide fxShow.gt-md>
                          <div fxLayout="column">
                            <span class="text-truncate" matTooltip="{{ sampleujiData.kontrakuji.contract_no }}">{{ sampleujiData.kontrakuji.contract_no }}</span>
                            <span class="text-truncate" matTooltip="{{ sampleujiData.kontrakuji.contract_category.title }}"
                                style="color: f5f5f5; font-size: 10px; font-style: italic;">{{ sampleujiData.kontrakuji.contract_category.title }}
                            </span>
                        </div>
                        </mat-cell>
                      </ng-container>

                       <!-- Column -->
                        <ng-container matColumnDef="sample_name">
                          <mat-header-cell *matHeaderCellDef mat-sort-header="sample_name">Sample Name</mat-header-cell>
                          <mat-cell *matCellDef="let sampleujiData">
                            <div fxLayout="column">
                            <span class="text-truncate"  style="white-space: normal;" matTooltip="{{ sampleujiData.sample_name }}">{{ sampleujiData.sample_name }}</span>
                            <span class="text-truncate" style="white-space: normal;" matTooltip="{{ sampleujiData.subcatalogue.sub_catalogue_name }}"
                                style="color: f5f5f5; font-size: 10px; font-style: italic;">{{ sampleujiData.subcatalogue.sub_catalogue_name }}
                            </span>
                            </div>
                          </mat-cell>
                        </ng-container>
                        
                        <!-- Column -->
                        <ng-container matColumnDef="no_sample">
                          <mat-header-cell *matHeaderCellDef mat-sort-header="no_sample">Sample Number</mat-header-cell>
                          <mat-cell *matCellDef="let sampleujiData">
                            <p class="text-truncate" matTooltip="{{ sampleujiData.no_sample }}"> {{ sampleujiData.no_sample }}</p>
                          </mat-cell>
                        </ng-container>

                        <!-- Column -->
                        <ng-container matColumnDef="test_status">
                          <mat-header-cell *matHeaderCellDef mat-sort-header>Status</mat-header-cell>
                          <mat-cell *matCellDef="let sampleujiData">
                              <div class="box-normal" *ngIf="sampleujiData.id_statuspengujian == 1">
                                  <p class="text-truncate" matTooltip="{{ sampleujiData.statuspengujian.name }}">{{ sampleujiData.statuspengujian.name }}</p>
                              </div>
                              <div class="box-urgent" *ngIf="sampleujiData.id_statuspengujian == 2">
                                  <p class="text-truncate" matTooltip="{{ sampleujiData.statuspengujian.name }}">{{ sampleujiData.statuspengujian.name }}</p>
                              </div>
                              <div class="box-very-urgent" *ngIf="sampleujiData.id_statuspengujian == 3">
                                  <p class="text-truncate" matTooltip="{{ sampleujiData.statuspengujian.name }}">{{ sampleujiData.statuspengujian.name }}</p>
                              </div>
                          </mat-cell>
                        </ng-container>
                        
                        <!-- Column -->
                        <ng-container matColumnDef="tgl_input">
                          <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md mat-sort-header="tgl_input">Input Date - Finish</mat-header-cell>
                          <mat-cell *matCellDef="let sampleujiData" fxHide fxShow.gt-md>
                              <p class="text-truncate" style="font-size: 12px; white-space: normal;">
                                <span class="material-icons">
                                    date_range
                                </span>
                                {{ sampleujiData.tgl_input | date}} - {{ sampleujiData.tgl_selesai | date}}
                              </p>
                          </mat-cell>
                        </ng-container>
                        
                        <!-- Column -->
                        <ng-container matColumnDef="action" >
                          <mat-header-cell *matHeaderCellDef mat-sort-header>Action</mat-header-cell>
                          <mat-cell *matCellDef="let sampleujiData; let i = index;">
                            <button matTooltip="Data Sample" mat-icon-button color="primary" (click)="gotoModulSample(sampleujiData.id)" >
                                <mat-icon>
                                    attach_file
                                </mat-icon>
                            </button>
                            <!-- <button matTooltip="Checked Sample" class="buttonAttachment" mat-mini-fab  (click)="changeStatus(sampleujiData.id)" >
                                <mat-icon>
                                    check
                                </mat-icon>
                            </button> -->

                        </mat-cell>
                      </ng-container>
                    
                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row *matRowDef="let sampleujiData; columns: displayedColumns;"
                        [@animate]="{value:'*',params:{y:'100%'}}"
                       >
                       </mat-row>
                      
                    </mat-table>

                    <div *ngIf="loadingfirst && this.sampleujiData.length === 0" style="width: 20%; margin-left: auto; margin-right: auto; margin-top: auto; margin-bottom: auto; display: block; text-align: center;">
                      <img  src="assets/images/gif/loading.gif" />
                      <small>Please Wait ...</small>
                  </div>
          
                  <div *ngIf="!loadingfirst && this.sampleujiData.length === 0" style="width: 20%; margin-left: auto; margin-right: auto; margin-top: auto; margin-bottom: auto; display: block; text-align: center;">
                      <img  src="assets/images/gif/selectfile.gif" />
                      <small>No Data</small>
                  </div>

                    <mat-paginator #paginator
                            [length]="total"
                            [pageIndex]="from"
                            [pageSize]="to"
                            [hidePageSize]="true"
                            [showFirstLastButtons]="true"
                            (page) = "paginated($event)">

                    </mat-paginator>

    </div>
    <!-- / CONTENT CARD -->

    </div>
    <!-- / CENTER -->
    
</div>